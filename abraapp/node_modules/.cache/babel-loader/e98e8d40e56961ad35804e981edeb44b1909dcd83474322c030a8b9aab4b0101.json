{"ast":null,"code":"import{useEffect,useState,useMemo}from'react';import Header from'../components/Header';import Footer from'../components/Footer';import{fetchProjects}from'../api/portfolio';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const[projects,setProjects]=useState([]);const[filter,setFilter]=useState(null);const[allProjects,setAllProjects]=useState([]);const[loading,setLoading]=useState(false);const[page,setPage]=useState(1);const projectsPerPage=24;// Change this to your desired number of items per load\nuseEffect(()=>{fetchProjects().then(data=>{setAllProjects(data.data);setProjects(data.data.slice(0,projectsPerPage));// load initial set of projects\n});},[]);const loadMoreProjects=()=>{setLoading(true);const nextPage=page+1;setTimeout(()=>{const nextProjects=allProjects.slice((nextPage-1)*projectsPerPage,nextPage*projectsPerPage);setProjects(prev=>[...prev,...nextProjects]);setPage(nextPage);setLoading(false);},1000);};useEffect(()=>{const handleScroll=()=>{if(window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||loading){return;}loadMoreProjects();};window.addEventListener('scroll',handleScroll);return()=>window.removeEventListener('scroll',handleScroll);},[loading,allProjects]);const visibleProjects=useMemo(()=>{const filteredProjects=filter?allProjects.filter(p=>{var _p$categories;return(_p$categories=p.categories)===null||_p$categories===void 0?void 0:_p$categories.some(cat=>cat.id===filter);}):projects.filter(p=>{var _p$categories2;return(_p$categories2=p.categories)===null||_p$categories2===void 0?void 0:_p$categories2.some(cat=>cat.id!==4);});return filteredProjects.sort((a,b)=>a.display_priority-b.display_priority);},[projects,filter]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"mx-auto p-2 sm:p-4\",children:[/*#__PURE__*/_jsx(CategoryFilter,{selected:filter,onSelect:setFilter}),/*#__PURE__*/_jsx(_Fragment,{children:visibleProjects.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No projects in this category.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"columns-2 sm:columns-3 md:columns-4 lg:columns-4 xl:columns-4 sm:gap-0 py-1 sm:py-3 mx-0 xl:mx-12\",children:/*#__PURE__*/_jsx(ProjectCard,{projects:visibleProjects})})}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading more projects...\"})]}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["useEffect","useState","useMemo","Header","Footer","fetchProjects","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Home","projects","setProjects","filter","setFilter","allProjects","setAllProjects","loading","setLoading","page","setPage","projectsPerPage","then","data","slice","loadMoreProjects","nextPage","setTimeout","nextProjects","prev","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","addEventListener","removeEventListener","visibleProjects","filteredProjects","p","_p$categories","categories","some","cat","id","_p$categories2","sort","a","b","display_priority","children","className","CategoryFilter","selected","onSelect","length","ProjectCard"],"sources":["/home/ec2-user/abra/abraapp/src/pages/Home.jsx"],"sourcesContent":["import { useEffect, useState, useMemo } from 'react';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { fetchProjects } from '../api/portfolio';\n\nexport default function Home() {\n  const [projects, setProjects] = useState([]);\n  const [filter, setFilter] = useState(null);\n  const [allProjects, setAllProjects] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const projectsPerPage = 24; // Change this to your desired number of items per load\n\n  useEffect(() => {\n    fetchProjects().then(data => {\n      setAllProjects(data.data);\n      setProjects(data.data.slice(0, projectsPerPage)); // load initial set of projects\n    });\n  }, []);\n\n  const loadMoreProjects = () => {\n    setLoading(true);\n    const nextPage = page + 1;\n\n    setTimeout(() => {\n      const nextProjects = allProjects.slice(\n        (nextPage - 1) * projectsPerPage,\n        nextPage * projectsPerPage\n      );\n      setProjects(prev => [...prev, ...nextProjects]);\n      setPage(nextPage);\n      setLoading(false);\n    }, 1000);\n  };\n\n  useEffect(() => {\n    const handleScroll = () => {\n      if (\n        window.innerHeight + document.documentElement.scrollTop\n        !== document.documentElement.offsetHeight || loading\n      ) {\n        return;\n      }\n      loadMoreProjects();\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [loading, allProjects]);\n\n  const visibleProjects = useMemo(() => {\n    const filteredProjects = filter\n      ? allProjects.filter(p => p.categories?.some(cat => cat.id === filter))\n      : projects.filter(p => p.categories?.some(cat => cat.id !== 4));\n\n    return filteredProjects.sort((a, b) => a.display_priority - b.display_priority);\n  }, [projects, filter]);\n\n  return (\n    <>\n      <Header />\n      <main className=\"mx-auto p-2 sm:p-4\">\n        <CategoryFilter selected={filter} onSelect={setFilter} />\n\n          <>\n            {visibleProjects.length === 0 ? (\n              <p className=\"text-gray-600\">No projects in this category.</p>\n            ) : (\n              <div className=\"columns-2 sm:columns-3 md:columns-4 lg:columns-4 xl:columns-4 sm:gap-0 py-1 sm:py-3 mx-0 xl:mx-12\">\n              <ProjectCard projects={visibleProjects} />\n              </div>\n            )}\n          </>\n        \n        {loading && <p className=\"text-gray-600\">Loading more projects...</p>}\n      </main>\n      <Footer />\n    </>\n  );\n}\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}